<!DOCTYPE html>

<html>
<head>
<style>

	#tabControl {
		background-color: #CCC;
		width: 20px;
		height: 40px;
		position: relative;
		float: left;
		top: 65px;
		border-top-left-radius: 10px;
		border-bottom-left-radius: 10px;
		/*box-shadow: 1px 4px 20px #333333;*/
	}

	#appWrapper {
		height: 100%;
		width: 780px;
		z-index: 100000;
		/*position: fixed;*/
		position: absolute;
		top: 0px;
		right: 0px;
		color: black;
		text-align: left;
		margin: 0px;
		overflow: hidden;
		/*-webkit-transition: all 5s ease-in-out;*/
	}

	#detailsPanel {
		position: absolute;
		/*float: left;*/
		right: -240px;
		height: 100%;
		width: 520px;
		-webkit-transition: right 1s ease;			

	}

	#profileDetails {
		width: 500px;
		height: 100%;
		overflow-y:auto;
		background-color: rgba(200,200,200,0.9);
		position: relative;
		float: left;
		padding: 10px;
		box-sizing: border-box;
/*		visibility: hidden;*/


	}

	#sidebar {
		color: #DBDBDB;
		background-color: #343838;
		/*position: relative;*/
		position: absolute;
		overflow: show;
		/*float: right;*/
		overflow: visible;
		right: 0px;
		top: 0px;
		width: 260px;
		height: inherit;
		font-family: "Open Sans", Helvetica, Arial, sans-serif;
		font-size: 13px;
		line-height: 1.4em;
		border-left: 1px solid #666666;
		-webkit-transition: right 1s ease;
		box-shadow: 2px 10px 10px black;
	}

	#test {
		background: red;
	}
	#test:hover {
		background: green;
	}
	#test:active {
		background: blue;
	}
	#test:target {
		background: black;
	}

	.test {
		/*transition-property duration timing-function,*/
		background-color: blue;
		transition: all 2s, font-size 2s ease-out;
	}
	.test:hover {
		background-color: red;
		right: -260px;
	}
	.test:active {
		font-size: 200%;
	}

	.open {

	}

	#top-menu {
		width: 100%;
		height: 30px;
		position: relative;
		background-color: gray;
	}

	#dancecard {
		width: 100%;
		height: 50px;
		position: relative;
		background-color: green;
	}
	.profile-section {
		width: 100%;
		height: 50px;
		padding: 5px 0px 5px 0px;
		position: relative;
		/*float: right;*/
		background-color: purple;
		border; 1px solid white;
	}

	.profile-section .profile-image {
		width: 48px;
		height: 48px;
		margin-left: 10px;
		position: relative;
		float: left;
		border-radius: 50%;
		background-color: gray;
	}

	p {
		margin: 0px;
	}

	#all-profiles {
		width: 100%;
		overflow: visible;
		position: relative;
	}

	.select-indicator-wrapper {
		position: absolute;
		/*position: relative;*/
		/*float: left;*/
		top: 0px;
		left: -7px;
		width: 14px;
		height: 100%;
		/*height: 100px;*/
		/*overflow: auto;*/
		/*z-index: 10000000;*/
		/*background-color: white;*/
	}

	.select-indicator {
		position: absolute;
		right: 7px;
		top: 18px;
		width: 14px;
		height: 14px;
		visibility: hidden;
		/*background-color: rgb(0,100,0, 0.7);*/
		-webkit-transition: all 0.5s ease;
	}

	.content {
		position: relative;
		width: 98%;
		height: 100%;
		margin: auto;
		background-color: green;
	}


</style>

</head>
<body>

<div id="appWrapper">

	<div id="detailsPanel">
		<div id="tabControl">
		</div>
		<div id="profileDetails">
			<div class="content">
				<a href='#test'>activate</a>
				<a href='#'>deactivate</a>
			</div>
		</div>
	</div>
	
	<div id="sidebar" >
		
		<div id="top-menu">
		</div>
		<div id="dancecard">
		</div>
		<div id="all-profiles">
			
			<div class="profile-section">
				<div class="profile-image">
				</div>
				<p>
					Name <br>
					Some personal blurb
				</p>
			</div>
			<div class="profile-section" data-index="0">
				<div class="profile-image">
				</div>
				<p>
					Name <br>
					Some personal blurb
				</p>
			</div>
			<div class="profile-section" data-index="1">
				<div class="profile-image">
				</div>
				<p>
					Name <br>
					Some personal blurb
				</p>
			</div>
			<div class="select-indicator-wrapper" data-index="2">
				<div class="select-indicator">
					<svg height="14" width="14">
					  <polygon points="0,0 0,14 14,7" style="fill:rgba(200,200,200,0.9);" />
					</svg>
				</div>
			</div>

		</div>

	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
<!-- <script src="./lib/jquery-1.11.0.min.js"></script> -->
<script>

	//18px to first element
	//18+60px to next element
	//18 + n*60 to next elements;
	function openSidepage() {  
		  	console.log('opening sidebar...');
		  // 	$('#sidebar').animate({  
			 //  right: '0px'  
			 // }, 400, 'linear');
		  // 	$('#detailsPanel').animate({
		  // 		right: '-240px'
		  // 	}, 400, 'linear'); 
		$('#sidebar').css('right', '0px');
		$('#detailsPanel').css('right', '-240px');
	}  
	  
	function closeSidepage(){  
		console.log('closing sidebar...');
		  // 	$('#sidebar').animate({  
			 //  right: '-265px'  
			 // }, 400, 'linear');
		  // 	$('#detailsPanel').animate({
		  // 		right: '-500px'
		  // 	}, 400, 'linear');
		$('#sidebar').css('right', '-261px');
		$('#detailsPanel').css('right', '-500px');
	} 

	function closeDetailsPanel(){
		console.log('closing details panel....');
	  // 	$('#detailsPanel').animate({  
		 //  right: '-240px'  
		 // }, 400, 'linear');
		$('#detailsPanel').css('right', '-240px');

	}

	function openDetailsPanel(){
		// console.log('div clicked');
		// $('#detailsPanel').animate({
		// 	right: '260px'
		//   	}, 400, 'linear');
		$('#detailsPanel').css('right', '260px');
	}

	$(".profile-section").each(function(index, element){
			var data = $(this).context.dataset;//.dataset;
			console.log(data);
			$(this).on("click", index, function(e){
				console.log(index + ": profile section clicked...");
				$('.select-indicator').css('top', function(){
					console.log(index);
					return 18 + index*60 + 'px';
				});
			});
	});
	
	$("#tabControl").on("click", function(e){  
	 		e.preventDefault();  
	   
		  var panelShowing = $('#detailsPanel').css('right') == '260px' ? true : false;
		  var sidebarShowing = $('#sidebar').css('right') == "0px" ? true : false;  
		    
		  if(panelShowing){
		  	//close panel 
		  	$('.select-indicator').css('right', '7px');
			$('.select-indicator').css('visibility', 'hidden');
			setTimeout(function(){
				closeDetailsPanel();
			},500);
		  	
		  	// $('#all-profiles').css('overflow', 'hidden');
		  	
		  }
		  else if (sidebarShowing) {
		  	//close sidebar
		  	closeSidepage();
		  }
		  else {
		  	//open sidebar
		  	openSidepage();

		  }
		  return false;
	}); 

	$('#sidebar').click(function(){
		openDetailsPanel();
		setTimeout(function(){
			// $('#all-profiles').css('overflow', 'visible');
			$('.select-indicator').css('visibility', 'visible');
			$('.select-indicator').css('right', '0px')
		}, 1000);
	})


</script>
</body>
</html>